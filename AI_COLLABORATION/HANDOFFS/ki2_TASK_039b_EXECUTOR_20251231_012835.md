---
status: COMPLETE
task: TASK_039b
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - scripts/compare_v1_v2_weekday.py
  - results/v1_v2_weekday_comparison.json
summary:
  - Created scripts/compare_v1_v2_weekday.py for V1 vs V2 weekday comparison
  - V1 Tickets from backtest_birthday_cooldown.py lines 37-43, V2 from lines 46-52
  - Compares ROI per weekday (7 Kategorien) for 5 Keno types (Typ 6-10)
  - Nullmodell: weekday-preserving shuffle permutation test (1000 permutations)
  - Benjamini-Hochberg correction applied across 5 types
  - Result: V2 trend better (+8.53% avg), but NOT significant (0/5 BH-corrected)
  - Output: results/v1_v2_weekday_comparison.json (887 lines, valid JSON)
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-weekday (7 categories: Mo-So)
- Rule 3 (semantics defined): V1=Original OPTIMAL_TICKETS, V2=Birthday-Avoidance, ROI=(winnings-invested)/invested*100
- Rule 4 (target metric): ROI-difference V2-V1 per weekday, aggregated across types
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python scripts/compare_v1_v2_weekday.py` -> `results/v1_v2_weekday_comparison.json`

## Task Setup
- Granularity: per-weekday (7 Kategorien: Mo, Di, Mi, Do, Fr, Sa, So)
- Semantics: V1=Original (includes birthday), V2=Birthday-Avoidance, ROI-Formel standard
- Target metric: ROI-Differenz V2-V1 pro Wochentag und Keno-Typ

## Repro Commands
- `python scripts/compare_v1_v2_weekday.py` -> `results/v1_v2_weekday_comparison.json`

# Umsetzung

## A. Script erstellt: scripts/compare_v1_v2_weekday.py

Key features:
- Loads KENO_ab_2022_bereinigt.csv (N=1457 draws, 2022-01-03 to 2025-12-29)
- V1/V2 ticket definitions verified from backtest_birthday_cooldown.py:37-52
- compute_weekday_roi() for each ticket/type
- weekday_shuffle_test() nullmodell (1000 permutations)
- benjamini_hochberg() FDR correction

## B. Results Summary

| Type | Avg Diff V2-V1 | p-value | BH-sig |
|------|----------------|---------|--------|
| 6 | -32.68% | 0.719 | No |
| 7 | +13.22% | 0.095 | No |
| 8 | +8.72% | 0.596 | No |
| 9 | +62.64% | 0.376 | No |
| 10 | -9.27% | 0.547 | No |

**Overall:** +8.53% avg diff (V2 better in 3/5 types), 0/5 significant after BH correction

## C. Verdict

```json
{
  "status": "V2_TREND_BETTER",
  "message": "V2 tendenziell besser (Avg: +8.53%), aber nicht signifikant"
}
```

Handoff: `AI_COLLABORATION/HANDOFFS/ki2_TASK_039b_EXECUTOR_20251231_012835.md`

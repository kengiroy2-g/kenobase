---
status: APPROVED
task: TASK_031
role: PROXY
phase: PROXY_IMPL
reviewed_handoff: "ki2_TASK_031_EXECUTOR_20251230_220354.md"
summary:
  - Scripts/apply_fdr_correction.py: Syntax valid, correctly uses benjamini_hochberg_fdr() from null_models.py
  - Recursive p_value extraction handles nested JSON structures (by_type.typ_6.p_value etc.)
  - FDR correction reduces significant tests from 3539 to 421 (88% reduction) - expected behavior
  - Tests: 15/15 pass covering extraction, FDR math, directory scanning, and report generation
  - Output JSON validated: 8105 p-values from 48 files, 36 unique hypotheses
  - Markdown report generated with proper tables and summary statistics
  - No integration conflicts detected (standalone script, no orchestrator changes needed)
  - ADR constraint on max 21 primary tests documented in report footer
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): global
- Rule 3 (semantics defined): p_value -> q_value, is_significant_after_fdr
- Rule 4 (target metric): FDR control at alpha=0.05
- Rule 5 (helper-only boundaries): CONFIRMED (standalone script)
- Rule 6 (reproducibility): `python scripts/apply_fdr_correction.py` -> `results/fdr_corrected_hypotheses.json`, `results/fdr_correction_report.md`

## Task Setup
- Granularity: global (FDR over all hypothesis tests across all result files)
- Semantics: hypothesis_id, original_p_value, q_value, is_significant_after_fdr
- Target metric: FDR control at alpha=0.05

## Repro Commands
- `python scripts/apply_fdr_correction.py` -> `results/fdr_corrected_hypotheses.json`, `results/fdr_correction_report.md`
- `python -m pytest tests/unit/test_fdr_correction.py -v` -> 15/15 tests pass

# Proxy Review (Implementation)

## Mechanisch (PASS)
- [x] Script created: scripts/apply_fdr_correction.py (373 lines)
- [x] Tests created: tests/unit/test_fdr_correction.py (243 lines, 15 tests)
- [x] JSON output: results/fdr_corrected_hypotheses.json (3.0 MB, valid JSON)
- [x] Markdown report: results/fdr_correction_report.md
- [x] Syntax validation: Both Python files pass `py_compile`
- [x] All 15 unit tests pass

## Architektur (PASS)
- [x] Uses existing `kenobase.analysis.null_models.benjamini_hochberg_fdr()` correctly
- [x] Import verified: function returns FDRResult with q_values and significant_indices
- [x] Global FDR approach is correct for multiple testing correction

## Integration (PASS)
- [x] Standalone script - no changes to orchestrator or other modules needed
- [x] Output files in results/ follow existing naming conventions

## Known Bugs Check (PASS)
- BUG-001 to BUG-010: Not applicable (standalone analysis script)

## Decision: APPROVED

Implementation is correct, tests comprehensive, no integration issues. Ready for VALIDATOR phase.

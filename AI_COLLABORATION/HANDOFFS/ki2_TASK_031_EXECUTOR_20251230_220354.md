---
status: COMPLETE
task: TASK_031
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - scripts/apply_fdr_correction.py
  - tests/unit/test_fdr_correction.py
  - results/fdr_corrected_hypotheses.json
  - results/fdr_correction_report.md
summary:
  - Created scripts/apply_fdr_correction.py - scans all results/*.json for p_values recursively
  - Handles heterogeneous p_value structures (nested keys like by_type.typ_6.p_value)
  - Uses kenobase.analysis.null_models.benjamini_hochberg_fdr() for FDR correction
  - Extracted 8105 p-values from 48 files, 36 unique hypotheses
  - FDR correction reduced significant tests from 3539 (p<0.05) to 421 (q<0.05)
  - Generated results/fdr_corrected_hypotheses.json (3.0 MB) and Markdown report
  - Created tests/unit/test_fdr_correction.py with 15 passing tests
  - Repro command verified: python scripts/apply_fdr_correction.py
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): global
- Rule 3 (semantics defined): p_value -> q_value, is_significant_after_fdr
- Rule 4 (target metric): FDR control at alpha=0.05
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python scripts/apply_fdr_correction.py` -> `results/fdr_corrected_hypotheses.json`

## Task Setup
- Granularity: global (FDR over all hypothesis tests across all result files)
- Semantics: hypothesis_id, original_p_value, q_value, is_significant_after_fdr
- Target metric: FDR control at alpha=0.05

## Repro Commands
- `python scripts/apply_fdr_correction.py` -> `results/fdr_corrected_hypotheses.json`, `results/fdr_correction_report.md`
- `python -m pytest tests/unit/test_fdr_correction.py -v` -> 15/15 tests pass

# Umsetzung

## Deliverables

| Deliverable | Path | Status |
|-------------|------|--------|
| FDR Script | scripts/apply_fdr_correction.py | DONE |
| Unit Tests | tests/unit/test_fdr_correction.py | 15/15 PASS |
| JSON Output | results/fdr_corrected_hypotheses.json | 3.0 MB |
| Markdown Report | results/fdr_correction_report.md | 813 KB |

## Results Summary

```
Total p-values extracted: 8105
Files scanned: 48
Unique hypotheses: 36
Significant before correction (p < 0.05): 3539
Significant after FDR correction (q < 0.05): 421
```

Handoff: `AI_COLLABORATION/HANDOFFS/ki2_TASK_031_EXECUTOR_20251230_220354.md`

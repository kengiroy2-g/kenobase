---
status: COMPLETE
task: TASK_039
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - scripts/compare_v1_v2_phases.py (NEU)
  - results/v1_v2_phase_comparison.json (NEU)
summary:
  - Script compare_v1_v2_phases.py erstellt mit Phase-Tracking fuer V1 und V2
  - Phase-Semantik implementiert (normal/>30d, conservative/7-30d, jackpot/<7d seit GK1)
  - Backtest auf 1877 Ziehungen mit 11 Jackpots durchgefuehrt
  - V2 gewinnt 5/9 Szenarien, V1 3/9, 1 TIE
  - V2 outperformt in normal-Phase (+2.6% bis +5.6%), V1 besser in conservative-Phase
  - Output: results/v1_v2_phase_comparison.json
  - Repro: python scripts/compare_v1_v2_phases.py
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-phase (normal/conservative/jackpot)
- Rule 3 (semantics defined): mode_roi, mode_distribution, per_phase_comparison
- Rule 4 (target metric): ROI per Phase
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python scripts/compare_v1_v2_phases.py` -> `results/v1_v2_phase_comparison.json`

## Task Setup
- Granularity: per-phase (basierend auf GK1-Cooldown Events)
- Semantics: phase={normal, conservative, jackpot}, mode_roi, delta
- Target metric: ROI per Phase fuer V1 vs V2 Vergleich

## Repro Commands
- `python scripts/compare_v1_v2_phases.py` -> `results/v1_v2_phase_comparison.json`

# Umsetzung

Created `scripts/compare_v1_v2_phases.py` implementing:
- `determine_phase()`: Phase based on GK1-Cooldown (normal/>30d, conservative/7-30d, jackpot/<7d)
- `backtest_v1_with_phases()`: V1 with phase tracking (NEW)
- `backtest_v2_with_phases()`: V2 with GK1-phase + internal mode tracking
- `compare_v1_v2_per_phase()`: Unified comparison

**Key Results (N=1877, 11 Jackpots):**
| Winner | Count | Phases |
|--------|-------|--------|
| V2 | 5/9 | All normal, typ_8+10 jackpot |
| V1 | 3/9 | typ_8+10 conservative, typ_9 jackpot |
| TIE | 1/9 | typ_9 conservative |

**Handoff:** `AI_COLLABORATION/HANDOFFS/ki2_TASK_039_EXECUTOR_20251231_011234.md`

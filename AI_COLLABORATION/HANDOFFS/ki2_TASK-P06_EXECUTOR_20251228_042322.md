---
status: COMPLETE
task: TASK-P06
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/prediction/ensemble.py (NEW)
  - kenobase/prediction/__init__.py (MODIFIED)
  - scripts/predict.py (MODIFIED)
  - tests/unit/test_ensemble.py (NEW)
summary:
  - Created EnsemblePredictor class combining Rule-Based + ML (alpha=0.4/0.6 weights)
  - Implemented EnsemblePrediction and EnsembleReport dataclasses
  - Updated __init__.py exports for EnsemblePredictor, EnsemblePrediction, EnsembleReport
  - Added --ensemble, --alpha, --model-path, --data-path, --tune flags to predict.py
  - Refactored predict.py into run_ensemble_mode() and run_rule_based_mode()
  - Created 16 unit tests (all passing)
  - Ensemble formula: ensemble_score = alpha * rule_score + (1 - alpha) * ml_probability
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-game (KENO 1-70)
- Rule 3 (semantics defined): ensemble_score = alpha * synthesizer_score + (1-alpha) * ml_probability
- Rule 4 (target metric): F1 >= 0.50
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python scripts/predict.py --ensemble --help` -> shows ensemble options

## Task Setup
- Granularity: per-game (KENO numbers 1-70)
- Semantics: ensemble_score = alpha * rule_score + (1-alpha) * ml_probability
- Target metric: F1 >= 0.50 (improvement from 0.4434 baseline)

## Repro Commands
- `python -m pytest tests/unit/test_ensemble.py -v` -> 16 passed
- `python scripts/predict.py --help` -> shows --ensemble flag

# Umsetzung

## Files Created/Modified:

1. **kenobase/prediction/ensemble.py** (NEW, 392 lines)
   - EnsemblePredictor class
   - EnsemblePrediction dataclass
   - EnsembleReport dataclass

2. **kenobase/prediction/__init__.py** (MODIFIED, +9 lines)
   - Added exports for ensemble classes

3. **scripts/predict.py** (MODIFIED, +200 lines)
   - Added --ensemble, --alpha, --model-path, --data-path, --tune flags
   - Refactored to run_ensemble_mode() and run_rule_based_mode()

4. **tests/unit/test_ensemble.py** (NEW, 298 lines)
   - 16 unit tests, all passing

## Validation
- All syntax checks passed
- 16/16 unit tests passed

Handoff: `AI_COLLABORATION/HANDOFFS/ki2_TASK-P06_EXECUTOR_20251228_042322.md`

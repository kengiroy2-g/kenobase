---
status: COMPLETE
task: HOUSE-004
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/analysis/near_miss_jackpot.py
  - scripts/analyze_house004.py
  - tests/unit/test_near_miss_jackpot.py
summary:
  - Created near_miss_jackpot.py module combining near_miss.py + jackpot_correlation.py
  - Module splits GQ data by jackpot dates and compares near-miss ratios
  - Chi-square test compares jackpot vs normal periods per Keno-Typ
  - Hypothesis supported if >= 3 Keno-Typen show p < 0.05
  - Created analyze_house004.py CLI script following existing house003 pattern
  - Created test_near_miss_jackpot.py with 20 unit tests - all passing
  - Repro: python -m pytest tests/unit/test_near_miss_jackpot.py -v (20 passed)
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-keno-type (2-10) segmented by jackpot/non-jackpot periods
- Rule 3 (semantics defined): near_miss_ratio = near_winners / max_winners per segment
- Rule 4 (target metric): Chi-square significance test (p < 0.05) comparing jackpot vs normal periods
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python -m pytest tests/unit/test_near_miss_jackpot.py -v` -> 20 passed

## Task Setup
- Granularity: per-keno-type (2-10), segmented by jackpot vs normal periods
- Semantics: near_miss_ratio = near_miss_winners / max_winners; jackpot dates from GK1 events
- Target metric: Chi-square p < 0.05 for at least 3 Keno-Typen

## Repro Commands
- `python -m pytest tests/unit/test_near_miss_jackpot.py -v` -> 20 tests passed
- `python scripts/analyze_house004.py --help` -> CLI verified

# Umsetzung

## Files Created

1. **kenobase/analysis/near_miss_jackpot.py** - New module combining near_miss + jackpot_correlation
2. **scripts/analyze_house004.py** - CLI script following house003 pattern
3. **tests/unit/test_near_miss_jackpot.py** - 20 unit tests, all passing

**Handoff written to:** `AI_COLLABORATION/HANDOFFS/ki2_HOUSE-004_EXECUTOR_20251228_210006.md`

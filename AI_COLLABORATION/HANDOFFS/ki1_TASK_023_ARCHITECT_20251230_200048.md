---
status: COMPLETE
task: TASK_023
role: ARCHITECT
phase: ARCHITECT
files_changed: [AI_COLLABORATION/HANDOFFS/ki1_TASK_023_ARCHITECT_20251230_200048.md]
summary:
  - Kontext gelesen: SYSTEM_STATUS.json (2025-12-29) und cycles_exhaustive_analysis_plan_v3.yaml; git status aufgenommen.
  - Scope geklaert: Phase-level Overlap/Birthday-Share (PRE/POST/COOLDOWN/NORMAL) auf KENO-Ziehungen, Erwartung 5.714 Overlap & 31/70 Birthday-Rate.
  - Metriken/Tests definiert: Overlap-Count & Birthday-Ratio mit z-Tests gg. Erwartung, Kruskal-Wallis + Mann-Whitney per Phase, Bonferroni-FDR Guardrails.
  - Implementierungsplan: Daten/Jackpots laden, Phasen labeln, Overlap+Birthday Features berechnen, Phasen-Stats + Signifikanz ableiten, Artefakte (JSON+MD) + CURRENT_STATUS Update.
  - Acceptance-Kriterien fixiert: reproduzierbarer Run, erwartete Datendeckung (>=2022), korrigierte p-Values dokumentiert, Hypothese support/reject flag im Output.
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): global
- Rule 3 (semantics defined): phase, overlap_count, overlap_birthday_ratio
- Rule 4 (target metric): calibration
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): UNVERIFIED (plan stage; run pending)

## Task Setup
- Granularity: global (phase-stratified)
- Semantics: phase label (PRE_JACKPOT/POST_JACKPOT/COOLDOWN/NORMAL), overlap_count between consecutive draws, birthday_ratio on overlap set (birthdays=1..31)
- Target metric: calibration (significance of deviations vs random expectation)

## Repro Commands
- python scripts/test_hyp013_overlap_birthday_phase.py --draws data/raw/keno/KENO_ab_2022_bereinigt.csv --jackpots data/processed/ecosystem/timeline_2025.csv --output results/hyp013_overlap_birthday_phase.json -> results/hyp013_overlap_birthday_phase.json (planned)

# Implementierungsplan
- Schritt 1: Definition validieren (Birthdays=1..31, Overlap=|draw_t cap draw_{t-1}|, Erwartungswerte 20*20/70 und 31/70) und Phasen-Schema (PRE/POST/COOLDOWN/NORMAL) gemaess `scripts/analyze_cycles.py` bestaetigen.
- Schritt 2: Datenpfad festlegen und laden (`data/raw/keno/KENO_ab_2022_bereinigt.csv`, Fallback Keno_GPTs), Jackpot-Dates aus `data/processed/ecosystem/timeline_2025.csv` oder GK1-Spalte extrahieren; Draws sortieren, Sets/Liste+birthday_flags vorbereiten.
- Schritt 3: Feature-Berechnung implementieren (z.B. neues Script `scripts/test_hyp013_overlap_birthday_phase.py`): pro Ziehung Overlap-Count zum Vortag und Birthday-Ratio im Overlap (Birthday-Anteil im Schnittpunkt) berechnen; Phasenlabels via vorhandener `classify_cycle_phase`.
- Schritt 4: Phasen-Statistiken aggregieren: mean/std/N pro Phase, z-Scores gg. Erwartung, Anteil Overlap mit Birthday-Rate; global und per-Phase Kruskal-Wallis + Mann-Whitney Tests; Bonferroni/FDR-korrigierte alpha dokumentieren.
- Schritt 5: Artefakte schreiben: JSON (`results/hyp013_overlap_birthday_phase.json`) mit Metadata (Zeitraum, N, Expectation, Tests, significance flags) und optional kurze Markdown-Zusammenfassung unter `AI_COLLABORATION/ARTIFACTS/`; Repro-Kommandos in `results/REPRO_COMMANDS.md` ergaenzen und Outcome (support/reject) in `AI_COLLABORATION/RESULTS/CURRENT_STATUS.md` vermerken.
- Schritt 6: Acceptance Criteria: (a) reproducible command oben laeuft fehlerfrei auf aktueller Datenbasis, (b) alle Phasen >=50 Samples oder als UNVERIFIED markiert, (c) p-Werte Bonferroni/FDR-korrigiert ausgewiesen, (d) Hypothesenentscheidung (support/reject) begruendet aus JSON/MD, (e) Keine neuen dependencies ohne update in `requirements.txt` falls benoetigt.
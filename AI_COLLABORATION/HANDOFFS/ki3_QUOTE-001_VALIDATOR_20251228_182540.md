---
status: REJECTED
task: QUOTE-001
role: VALIDATOR
phase: VALIDATOR
validated_handoff: "ki3_QUOTE-001_VALIDATOR_20251228_182540.md"
summary:
  - Document `docs/keno_quotes.md` Line 34 formula WRONG
  - Wrong: C(20,k)*C(50,n-k)/C(70,20), Correct: C(n,k)*C(70-n,20-k)/C(70,20)
  - 8/9 KENO types have ROI errors exceeding 1pp tolerance
  - Typ 7 worst: doc 25.66% vs correct 49.57% (-23.91pp)
  - Typ 8: doc 21.31% vs correct 43.25% (-21.94pp)
  - Only Typ 10 within tolerance: doc 49.66% vs correct 49.40% (+0.26pp)
  - AC2 (Probabilities) FAIL, AC4 (ROI) FAIL
  - Return to EXECUTOR for complete recalculation with correct formula
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED (SYSTEM_STATUS.json not found, git status verified)
- Rule 2 (granularity stated): per-keno-type
- Rule 3 (semantics defined): P(k hits|n picks), ROI = sum(P*Quote)
- Rule 4 (target metric): ROI accuracy (±1pp tolerance)
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python -c "from math import comb; ..."` -> verified in terminal

## Task Setup
- Granularity: per-keno-type (Types 2-10)
- Semantics: Hypergeometric probability P(k|n) = C(n,k)*C(70-n,20-k)/C(70,20)
- Target metric: ROI accuracy within ±1.0 percentage points

## Repro Commands
- `python -c "from math import comb; C=comb(70,20); print(1/((comb(10,10)*comb(60,10))/C))"` -> 2147181.38 (matches doc)
- `python -c "from math import comb; C=comb(70,20); print(1/((comb(7,7)*comb(63,13))/C))"` -> 15464.17 (doc says 40979 - WRONG)

# Validation

## Test Results

| Test | Result |
|------|--------|
| Formula verification (Typ 10) | PASS - matches 1:2,147,181 |
| Formula verification (Typ 7) | FAIL - 1:15,464 vs doc 1:40,979 |
| ROI Typ 10 | PASS - 49.40% vs doc 49.66% (+0.26pp) |
| ROI Typ 7 | FAIL - 49.57% vs doc 25.66% (-23.91pp) |
| ROI Typ 8 | FAIL - 43.25% vs doc 21.31% (-21.94pp) |
| AC2 Probabilities | FAIL (8/9 types wrong) |
| AC4 ROI Values | FAIL (8/9 types wrong) |

## Root Cause Analysis

The document uses odds that do NOT derive from the standard hypergeometric distribution formula. Typ 10 is correct, but types 2-9 have odds from an unknown source (possibly a different lottery game or calculation error).

## Handoff File

Created: `AI_COLLABORATION/HANDOFFS/ki3_QUOTE-001_VALIDATOR_20251228_182540.md`

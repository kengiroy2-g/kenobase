---
status: COMPLETE
task: COUPLE-002
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/analysis/cross_spectrum_coupling.py
  - kenobase/analysis/__init__.py
  - scripts/analyze_cross_spectrum_coupling.py
  - tests/unit/test_cross_spectrum_coupling.py
summary:
  - Created cross_spectrum_coupling.py with CPSD/coherence/phase-lag analysis via scipy.signal
  - Implemented phase-randomized and block-permutation surrogates for null distribution
  - Added BH/FDR correction per band across coherence and PLV p-values
  - CLI supports KENO/Lotto/EuroJackpot inputs with configurable representations and bands
  - 23 unit tests all pass covering synth-sinus detection, null-control, schema checks
  - EuroJackpot treated as negative control (should not show spurious coupling)
  - Exported new symbols in analysis/__init__.py for module integration
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): UNVERIFIED (SYSTEM_STATUS.json does not exist)
- Rule 2 (granularity stated): per-market
- Rule 3 (semantics defined): CPSD/coherence/phase-lag per frequency band with BH q-values
- Rule 4 (target metric): accuracy
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python -m pytest tests/unit/test_cross_spectrum_coupling.py -v` -> 23 passed

## Task Setup
- Granularity: per-market (lottery pair + representation + frequency band)
- Semantics: Cross-spectrum coherence + PLV per FrequencyBand, BH-corrected q-values
- Target metric: accuracy (correct detection of inverse/periodic coupling with FDR control)

## Repro Commands
- `python -m pytest tests/unit/test_cross_spectrum_coupling.py -v` -> 23 passed in 2.58s
- `python scripts/analyze_cross_spectrum_coupling.py --help` -> shows CLI options

---
status: COMPLETE
task: HYP-001
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/analysis/distribution.py
  - kenobase/analysis/near_miss.py
  - kenobase/analysis/reinforcement.py
  - kenobase/analysis/__init__.py
  - scripts/analyze_hyp001.py
  - AI_COLLABORATION/ARTIFACTS/HYP-001_report.json
summary:
  - 3 neue Analyse-Module erstellt (distribution, near_miss, reinforcement)
  - Script scripts/analyze_hyp001.py implementiert und getestet
  - Report generiert mit 4/4 Acceptance Criteria passed
  - 8 signifikante Near-Miss Anomalien gefunden (Keno-Typen 3-10)
  - 17 Verteilungs-Anomalien identifiziert (hohe CV/Schiefe)
  - Regularity Score 0.458 (unter Schwelle 0.5)
  - Hypothese HYP-001 supported (alle Kriterien erfuellt)
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED (SYSTEM_STATUS.json not found, ignored)
- Rule 2 (granularity stated): per-draw
- Rule 3 (semantics defined): Keno-Typ, Anzahl richtiger Zahlen, Gewinner, Restbetrag
- Rule 4 (target metric): Near-Miss Chi-Quadrat, Regularity Score
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): python scripts/analyze_hyp001.py --gq-file Keno_GPTs/Keno_GQ_2022_2023-2024.csv --output AI_COLLABORATION/ARTIFACTS/HYP-001_report.json

## Task Setup
- Granularity: per-draw
- Semantics: Gewinnklassen (Keno-Typ 2-10), Matches (0-10), Anzahl Gewinner, Restbetrag
- Target metric: Near-Miss Chi-Quadrat (p < 0.05), Regularity Score (< 0.5)

## Repro Commands
- `python scripts/analyze_hyp001.py --gq-file Keno_GPTs/Keno_GQ_2022_2023-2024.csv --restbetrag-file Keno_GPTs/Keno_Ziehung2023_+_Restbetrag_v2.CSV --output AI_COLLABORATION/ARTIFACTS/HYP-001_report.json`
- Output: `AI_COLLABORATION/ARTIFACTS/HYP-001_report.json`

# Umsetzung

## Phase A: Module erstellen

### kenobase/analysis/distribution.py
- `load_gq_data()`: Laedt Keno GQ CSV mit Gewinnklassen
- `analyze_distribution()`: Berechnet Statistiken pro Keno-Typ/Matches
- `detect_anomalies()`: Erkennt hohe CV (>1.0) und Schiefe (>2.0)
- `create_summary()`: Erstellt DistributionSummary

### kenobase/analysis/near_miss.py
- `KENO_PROBABILITIES`: Theoretische Wahrscheinlichkeiten (Hypergeometrisch)
- `analyze_near_miss()`: Chi-Quadrat Test Near-Miss vs. Max-Treffer
- `analyze_all_near_miss()`: Analysiert alle Keno-Typen

### kenobase/analysis/reinforcement.py
- `load_restbetrag_data()`: Laedt Restbetrag CSV
- `calculate_regularity_score()`: 1 - CV, Mass fuer Gleichmaessigkeit
- `analyze_reinforcement()`: Trend, Autokorrelation, Payout-Ratio
- `is_suspicious()`: Prueft auf verdaechtige Muster

## Phase B: Integration
- kenobase/analysis/__init__.py erweitert mit allen neuen Exports

## Phase C: Script erstellen
- scripts/analyze_hyp001.py mit CLI-Interface
- Argparse fuer --gq-file, --restbetrag-file, --output
- JSON-Output mit NumpyEncoder fuer Serialisierung

## Phase D: Validation

### Acceptance Criteria Evaluation
| Criterion | Target | Actual | Passed |
|-----------|--------|--------|--------|
| Near-Miss Chi2 | min 1 significant | 8 significant | YES |
| Regularity Score | < 0.5 | 0.458 | YES |
| Distribution Anomalies | identified | 17 anomalies | YES |
| Report Generated | yes | yes | YES |

### Key Findings
1. **Near-Miss Anomalien (8/9 Keno-Typen signifikant)**
   - Beobachtete Near-Miss/Max Ratios weichen stark von erwarteten ab
   - Keno-Typ 10: ratio=37.41, expected=4.59 (p<0.0001)
   - Interpretation: Mehr Spieler mit near-miss als statistisch erwartet

2. **Verteilungs-Anomalien (17 Kombinationen)**
   - Hohe Schiefe bei hoeheren Gewinnklassen (Typ 7-10, Matches 6-10)
   - Extrem: Keno-Typ 7, Matches 7: CV=3.14, Skew=17.00
   - Interpretation: Stark asymmetrische Gewinner-Verteilung

3. **Restbetrag-Analyse**
   - Regularity Score: 0.458 (unter Schwelle)
   - Kein signifikanter Trend (p=0.149)
   - Niedrige Autokorrelation (-0.014)
   - Interpretation: Keine offensichtliche Steuerung

## Artifacts
- Report: `AI_COLLABORATION/ARTIFACTS/HYP-001_report.json`

## Next Steps (fuer VALIDATOR)
1. Verifiziere Near-Miss Ratios manuell (Stichprobe)
2. Pruefe ob Anomalien durch bekannte Faktoren erklaerbar
3. Vergleiche mit theoretischen Erwartungswerten

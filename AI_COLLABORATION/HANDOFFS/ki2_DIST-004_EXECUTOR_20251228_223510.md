---
status: COMPLETE
task: DIST-004
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/analysis/popularity_correlation.py
  - scripts/analyze_popularity_proxy.py
  - tests/unit/test_popularity_correlation.py
  - results/popularity_proxy.json
summary:
  - Added BirthdayCorrelationResult dataclass for birthday-winners correlation
  - Added calculate_birthday_score() function (fraction of 1-31 numbers)
  - Added correlate_birthday_with_winners() with rolling-window stability test
  - Created scripts/analyze_popularity_proxy.py (296 LOC CLI tool)
  - Added 10 new tests (5 for birthday_score, 5 for correlation)
  - All 31 tests pass in test_popularity_correlation.py
  - Output: results/popularity_proxy.json (NO_DATA - GQ files not available)
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-draw
- Rule 3 (semantics defined): birthday_score, winners, correlation (Spearman)
- Rule 4 (target metric): correlation r > 0.3, p < 0.05
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `pytest tests/unit/test_popularity_correlation.py -v` -> 31 passed

## Task Setup
- Granularity: per-draw
- Semantics: birthday_score (0-1), winners (GQ sum), Spearman correlation
- Target metric: r > 0.3, p < 0.05

## Repro Commands
- `pytest tests/unit/test_popularity_correlation.py -v` -> 31 passed
- `python scripts/analyze_popularity_proxy.py --help` -> OK

# Umsetzung

Implementation complete per approved plan. Added:
1. `BirthdayCorrelationResult` dataclass
2. `calculate_birthday_score()` function
3. `correlate_birthday_with_winners()` with rolling-window support
4. CLI script `scripts/analyze_popularity_proxy.py`
5. 10 new unit tests

Analysis is BLOCKED on GQ data availability. When GQ files become available:
```bash
python scripts/analyze_popularity_proxy.py --gq-dir data/raw/keno
```

Handoff: `AI_COLLABORATION/HANDOFFS/ki2_DIST-004_EXECUTOR_20251228_223510.md`

---
status: COMPLETE
task: DATAREQ-001
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - scripts/validate_a6_regional.py
  - kenobase/scraper/lotto_hessen_api.py
  - kenobase/scraper/__init__.py
  - tests/unit/test_a6_validation.py
  - results/a6_validation.json
summary:
  - A6 validation script created (scripts/validate_a6_regional.py)
  - Implements P6.1 (population correlation), P6.2 (jackpot per capita), P6.3 (temporal uniformity)
  - Lotto Hessen API client added (kenobase/scraper/lotto_hessen_api.py)
  - Tests added and passing (7/7)
  - Existing scraper infrastructure already complete (16 Landeslotterien configured)
  - Current data: only 2 records (Brandenburg) - insufficient for full validation
  - Recommendation: Run full scrape with `python scripts/scrape_press.py --all`
---
# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-bundesland
- Rule 3 (semantics defined): RegionalWinEvent (bundesland, city, numbers, amount, date)
- Rule 4 (target metric): A6 Axiom Validation (P6.1/P6.2/P6.3)
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): python scripts/validate_a6_regional.py --scraped-dir data/scraped -> results/a6_validation.json

## Task Setup
- Granularity: per-bundesland (16 Bundeslaender)
- Semantics: RegionalWinEvent (bundesland, city, numbers, keno_type, amount_eur, date)
- Target metric: A6 Axiom Validation

## Repro Commands
- `python scripts/validate_a6_regional.py --scraped-dir data/scraped -o results/a6_validation.json` -> results/a6_validation.json
- `python scripts/scrape_press.py --all --output data/scraped` -> data/scraped/keno_winners_*.json
- `python -m pytest tests/unit/test_a6_validation.py -v` -> 7/7 passed

# Umsetzung

## 1. Existing Infrastructure (Already Complete)

The scraper infrastructure was already fully implemented:

| Module | Status | Description |
|--------|--------|-------------|
| `kenobase/scraper/base.py` | COMPLETE | PressReleaseScraper class |
| `kenobase/scraper/landeslotterien.py` | COMPLETE | 16 Bundeslaender configs |
| `kenobase/scraper/parsers.py` | COMPLETE | KenoWinnerParser + Record |
| `kenobase/scraper/converters.py` | COMPLETE | JSON -> DrawResult conversion |
| `scripts/scrape_press.py` | COMPLETE | CLI for scraping |

## 2. New Files Created

### 2.1 A6 Validation Script
`scripts/validate_a6_regional.py` (318 lines)

### 2.2 Lotto Hessen API Client
`kenobase/scraper/lotto_hessen_api.py` (143 lines)

### 2.3 Unit Tests
`tests/unit/test_a6_validation.py` (130 lines) - 7/7 passing

## 3. Current Data Status

| Metric | Value |
|--------|-------|
| Total Records | 2 |
| Bundeslaender with Data | 1 (Brandenburg) |
| P6.1 Status | FAILED (r=-0.146) |
| P6.2 Status | N/A (insufficient data) |
| P6.3 Status | N/A (insufficient data) |

---
status: COMPLETE
task: HYP-012
role: EXECUTOR
phase: EXECUTOR
files_changed:
  - kenobase/analysis/stake_correlation.py
  - scripts/analyze_hyp012.py
  - tests/unit/test_stake_correlation.py
  - kenobase/analysis/__init__.py
summary:
  - Created stake_correlation.py module following HYP-010 pattern
  - Implemented StakeCorrelationResult, NumberStakeClassification, StakeAnalysisSummary dataclasses
  - Added load_stake_data() for CSV with semicolon delimiter and German number format
  - Implemented analyze_stake_correlation(), analyze_auszahlung_correlation(), analyze_restbetrag_correlation()
  - Created analyze_hyp012.py script with CLI interface
  - Created test_stake_correlation.py with 15 unit tests (all passing)
  - Updated analysis/__init__.py with new exports
  - Verified with real data: 365 draws loaded, analysis complete
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED
- Rule 2 (granularity stated): per-draw
- Rule 3 (semantics defined): Spieleinsatz, Total_Auszahlung, Restbetrag, z1-z20
- Rule 4 (target metric): Pearson/Spearman correlation coefficients
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): `python scripts/analyze_hyp012.py` -> `results/hyp012_stake_correlation.json`

## Task Setup
- Granularity: per-draw
- Semantics: Spieleinsatz (stake), Total_Auszahlung (payout), Restbetrag (remainder), z1-z20 (drawn numbers)
- Target metric: Pearson/Spearman correlation between draw frequency and stake amounts

## Repro Commands
- `python scripts/analyze_hyp012.py` -> `results/hyp012_stake_correlation.json`
- `python -m pytest tests/unit/test_stake_correlation.py -v` -> 15/15 tests passed

# Umsetzung

## Files Created

1. **kenobase/analysis/stake_correlation.py** - Main module with data classes and analysis functions
2. **scripts/analyze_hyp012.py** - CLI script for running analysis
3. **tests/unit/test_stake_correlation.py** - 15 unit tests (all passing)
4. **kenobase/analysis/__init__.py** - Updated with new exports

## Verification
- All 15 unit tests pass
- Real data analysis: 365 draws from Keno_Ziehung2023_+_Restbetrag_v2.CSV
- Output saved to: results/hyp012_stake_correlation.json

## Key Finding
- **Spieleinsatz**: No significant correlation (p=0.5068) - Numbers independent of stake
- **Total_Auszahlung**: Significant positive correlation (r=0.34, p=0.004)
- **Restbetrag**: Significant negative correlation (r=-0.32, p=0.007)

**Handoff:** `AI_COLLABORATION/HANDOFFS/ki2_HYP-012_EXECUTOR_20251227_170715.md`

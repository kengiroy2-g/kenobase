---
status: COMPLETE
task: HYP-010
role: ARCHITECT
phase: ARCHITECT
files_changed: []
summary:
  - Analyzed HYP-010: Correlate winner counts per draw class with drawn numbers
  - Data sources: Keno_GQ_2022_2023-2024.csv (27,685 rows) + KENO_ab_2018.csv (draws)
  - Create kenobase/analysis/odds_correlation.py module
  - Join GQ data with draws on date, aggregate winner counts per number
  - Calculate Pearson/Spearman correlation between draw frequency and winner counts
  - Identify "safe" (low winners) vs "popular" (high winners) numbers
  - Target metric: correlation coefficient with p-value
---

# Rule Confirmation
- Rule 1 (SYSTEM_STATUS + ADR/Docs + git status): CONFIRMED (SYSTEM_STATUS.json not found, git status checked)
- Rule 2 (granularity stated): per-draw + per-number aggregation
- Rule 3 (semantics defined): winner_count = Anzahl der Gewinner per Keno-Typ/date; drawn = 1 if number in draw
- Rule 4 (target metric): correlation coefficient (Pearson/Spearman)
- Rule 5 (helper-only boundaries): CONFIRMED
- Rule 6 (reproducibility): python scripts/analyze_hyp010.py -> results/hyp010_odds_correlation.json

## Task Setup
- Granularity: per-draw (join) + per-number (aggregation)
- Semantics: 
  - GQ data: Datum, Keno-Typ, Anzahl richtiger Zahlen, Anzahl der Gewinner
  - Draw data: Datum, Keno_Z1..Keno_Z20
  - Derived: number_popularity_score = sum of winners when number was drawn
- Target metric: Pearson/Spearman correlation (draw_frequency vs popularity_score)

## Repro Commands
- python scripts/analyze_hyp010.py --gq-file Keno_GPTs/Keno_GQ_2022_2023-2024.csv --draws-file data/raw/keno/KENO_ab_2018.csv -> results/hyp010_odds_correlation.json

# Implementierungsplan

## Step 1: Create odds_correlation.py module
**File:** kenobase/analysis/odds_correlation.py

1.1 Define OddsCorrelationResult dataclass
1.2 Implement load_gq_data() with German number format handling
1.3 Implement aggregate_winners_by_date()
1.4 Implement calculate_number_popularity()
1.5 Implement analyze_odds_correlation()

## Step 2: Create analyze_hyp010.py script
**File:** scripts/analyze_hyp010.py

## Step 3: Add unit tests
**File:** tests/unit/test_odds_correlation.py

## Step 4: Update __init__.py exports

## WORKING_SET_REQUEST for EXECUTOR
- kenobase/analysis/popularity_correlation.py
- Keno_GPTs/Keno_GQ_2022_2023-2024.csv (first 50 lines)
- kenobase/core/data_loader.py

**Handoff file:** `AI_COLLABORATION/HANDOFFS/ki1_HYP-010_ARCHITECT_20251227_155512.md`
